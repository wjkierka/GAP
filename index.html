<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>GAP Widget: Session Tracker</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <h1>GAP Widget: Green Button Session Tracker</h1>

    <div id="green-button">
        <span id="status-indicator">IDLE</span>
    </div>

    <div id="graph-container">
        <div class="controller" style="top:5%; left:50%;"></div>
        <div class="controller" style="top:50%; left:95%;"></div>
        <div class="controller" style="top:95%; left:50%;"></div>
        <div class="controller" style="top:50%; left:5%;"></div>
    </div>

    <div class="documentation-text">
        <p>The <strong>AUTARTOS S.A.</strong> system represents digital sovereignty.</p>
        <p>Read the full <a href="https://wjkierka.github.io/GAP/README.md" target="_blank" class="manifesto-link">README.md</a></p>
    </div>

    <script>
        const tracker = document.getElementById('green-button');

        // Funkcja przesuwania dla myszki i dotyku
        function move(e) {
            let x = e.type === 'touchmove' ? e.touches[0].clientX : e.clientX;
            let y = e.type === 'touchmove' ? e.touches[0].clientY : e.clientY;
            tracker.style.left = (x - 25) + 'px';
            tracker.style.top = (y - 25) + 'px';
        }

        tracker.addEventListener('mousedown', () => { document.addEventListener('mousemove', move); });
        document.addEventListener('mouseup', () => { document.removeEventListener('mousemove', move); });

        // OBSŁUGA DOTYKU (DLA TELEFONU)
        tracker.addEventListener('touchmove', function(e) {
            e.preventDefault(); // Blokuje "skakanie" strony
            move(e);
        }, {passive: false});

    </script>
</body>
</html>
    </div>

    <script>
        const tracker = document.getElementById('green-button');
        const status = document.getElementById('status-indicator');

        // Prosta logika przesuwania (drag)
        tracker.onmousedown = function(event) {
            tracker.style.position = 'absolute';
            moveAt(event.pageX, event.pageY);
            function moveAt(pageX, pageY) {
                tracker.style.left = pageX - tracker.offsetWidth / 2 + 'px';
                tracker.style.top = pageY - tracker.offsetHeight / 2 + 'px';
            }
            function onMouseMove(event) { moveAt(event.pageX, event.pageY); }
            document.addEventListener('mousemove', onMouseMove);
            tracker.onmouseup = function() {
                document.removeEventListener('mousemove', onMouseMove);
                tracker.onmouseup = null;
            };
        };
        tracker.ondragstart = function() { return false; };

        // Logika faz (przykład)
        document.getElementById('code-input-1').addEventListener('input', (e) => {
            if(e.target.value.length === 6) {
                status.innerText = "PHASE 1";
                tracker.style.background = "#f1c40f"; // Zmiana koloru na standby
            }
        });
    </script>

  <script src="script.js"></script>
</body>
</html>
